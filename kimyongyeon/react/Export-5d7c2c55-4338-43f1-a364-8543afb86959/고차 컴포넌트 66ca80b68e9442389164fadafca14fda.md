# ê³ ì°¨ ì»´í¬ë„ŒíŠ¸

# ì •ì˜

ê³ ì°¨ ì»´í¬ë„ŒíŠ¸(HOC, Higher Order Component)ëŠ” ì»´í¬ë„ŒíŠ¸ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•œ Reactì˜ ê³ ê¸‰ ê¸°ìˆ ì´ë‹¤.

React APIê°€ ì•„ë‹Œ React êµ¬ì„±ì  íŠ¹ì§•ì—ì„œ ë‚˜ì˜¤ëŠ” íŒ¨í„´ì´ë‹¤. 

**êµ¬ì²´ì ìœ¼ë¡œ ê³ ì°¨ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ì ¸ì™€ ìƒˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.**

![Untitled](%E1%84%80%E1%85%A9%E1%84%8E%E1%85%A1%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%A9%E1%84%82%E1%85%A5%E1%86%AB%E1%84%90%E1%85%B3%2066ca80b68e9442389164fadafca14fda/Untitled.png)

```jsx
const EnhancedComponent = higherOrderComponent(WrappedComponent);
```

ì»´í¬ë„ŒíŠ¸ëŠ” propsë¥¼ UIë¡œ ë³€í™˜í•˜ëŠ” ë°˜ë©´ì—, ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¡œ ë³€í™˜ í•©ë‹ˆë‹¤.

![Untitled](%E1%84%80%E1%85%A9%E1%84%8E%E1%85%A1%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%A9%E1%84%82%E1%85%A5%E1%86%AB%E1%84%90%E1%85%B3%2066ca80b68e9442389164fadafca14fda/Untitled%201.png)

## ì»´í¬ë„ŒíŠ¸ propsë¥¼ UIë³€í™˜ ì˜ˆì‹œ

```jsx
function SplitPane(props) {
  return (
    <div className="SplitPane">
      <div className="SplitPane-left">
        {props.left}
      </div>
      <div className="SplitPane-right">
        {props.right}
      </div>
    </div>
  );
}

function App() {
  return (
    <SplitPane
      left={
        <Contacts />
      }
      right={
        <Chat />
      } />
  );
}
```

## ê³ ì°¨ì»´í¬ë„ŒíŠ¸ë¡œ ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ ë³€í™˜ ì˜ˆì‹œ

```jsx
function logProps(WrappedComponent) {
  return class extends React.Component {
    componentDidUpdate(prevProps) {
      console.log('Current props: ', this.props);
      console.log('Previous props: ', prevProps);
    }
    render() {
      // ë“¤ì–´ì˜¨ componentë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ” containerì…ë‹ˆë‹¤. ì¢‹ì•„ìš”!
      return <WrappedComponent {...this.props} />;
    }
  }
}
```

ê³ ì°¨ ì»´í¬ë„ŒíŠ¸(HOC)ëŠ” Reduxì˜ connectì™€ relayì˜ createFragmentContainerì™€ ê°™ì€ ì„œë“œ íŒŒí‹° React ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ í”í•˜ê²Œ ë³¼ ìˆ˜ ìˆë‹¤. 

# í•™ìŠµëª©í‘œ

- ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ê°€ ìœ ìš©í•œ ì´ìœ ë¥¼ ë³´ì—¬ì¤€ë‹¤.
- ì§ì ‘ ì‘ì„±í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³¸ë‹¤.

# íš¡ë‹¨ ê´€ì‹¬ì‚¬(Cross-Cutting Concerns)ì— ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©í•˜ê¸°

<aside>
ğŸ’¡ ê°ì²´ ì§€í–¥ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì—ì„œ íš¡ë‹¨ ê´€ì‹¬ì‚¬ ë˜ëŠ” í¬ë¡œìŠ¤ ì»¤íŒ… ë¬¸ì œëŠ” ë‹¤ë¥¸ ê´€ì‹¬ì‚¬ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” í”„ë¡œê·¸ë¨ì˜ aspectë‹¤. ì´ëŠ” ë””ìì¸ê³¼ êµ¬í˜„ ë©´ì—ì„œ ì‹œìŠ¤í…œì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ìœ¼ë¡œë¶€í„° ê¹¨ë—ì´ ë¶„í•´ë˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë©° ë¶„ì‚°(ì½”ë“œ ì¤‘ë³µ)ë˜ê±°ë‚˜ ì–½íˆëŠ”(ì‹œìŠ¤í…œ ê°„ì˜ ìƒë‹¹í•œ ì˜ì¡´ì„± ì¡´ì¬) ì¼ì´ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤.

</aside>

## í´ë¼ì´ì–¸íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µë„

```jsx
<App>
  <Router>
    <Container>
      <Page>
```

- ì „ì²´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹´ë‹¹í•˜ëŠ” App ì»´í¬ë„ŒíŠ¸ë‹¤.
- ë¸Œë¼ìš°ì ¸ ìš”ì²­ ë”°ë¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì´ Router ì»´í¬ë„ŒíŠ¸ë‹¤.
- UI ë Œë”ì— í•„ìš”í•œ ë°ì´í„° ì²˜ë¦¬ëŠ” Container ì»´í¬ë„ŒíŠ¸ì˜ ì—­í• ì´ë‹¤.
- UIë¥¼ ë Œë”ë§í•˜ëŠ” ê²ƒì€ Page ì»´í¬ë„ŒíŠ¸ë‹¤.

ì´ì²˜ëŸ¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ê³„ì¸µìœ¼ë¡œ ë¶„ë¦¬í•˜ì§€ë§Œ ê¸°ëŠ¥ê¹Œì§€ ì™„ë²½í•˜ê²Œ ë¶„ë¦¬í•  ìˆ˜ëŠ” ì—†ë‹¤. ì½”ë“œì˜ ì¤‘ë³µì´ ìƒê¸¸ ìˆ˜ ë°–ì— ì—†ë‹¤. ì˜ˆë¥¼ë“¤ì–´ Container ì»´í¬ë„ŒíŠ¸ì—ì„œ ì£¼ì†Œ íŒŒë¼ë§¤í„° ì •ë³´ê°€ í•„ìš”í•˜ë‹¤. Page ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ì£¼ì†Œ ì´ë™ ê¸°ëŠ¥ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. ë‘ ê³„ì¦ ëª¨ë‘ ì£¼ì†Œ ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤. 

ì´ì²˜ëŸ¼ ê° ê³„ì¸µì„ ë„˜ì–´ ê³µí†µìœ¼ë¡œ í•„ìš”í•œ ê´€ì‹¬ì‚¬ê°€ ìˆëŠ”ë° ì´ ê²ƒì„ íš¡ë‹¨ ê´€ì‹¬ì‚¬ ë¼ê³  í‘œí˜„í•œë‹¤. 

![Untitled](%E1%84%80%E1%85%A9%E1%84%8E%E1%85%A1%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%A9%E1%84%82%E1%85%A5%E1%86%AB%E1%84%90%E1%85%B3%2066ca80b68e9442389164fadafca14fda/Untitled%202.png)

ì •ë¦¬í•˜ë©´Â **ì–´í”Œë¦¬ì¼€ì´ì…˜ ê° ê³„ì¸µì—ì„œ ê³µí†µì ìœ¼ë¡œ í•„ìš”í•œ ë¬¸ì œ**ë¥¼ íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¼ê³  ë¶€ë¥¼ ìˆ˜ ìˆë‹¤.Â **ê³ ì°¨ ì»´í¬ë„ŒíŠ¸**
ëŠ” ì´ëŸ° ê³µí†µì˜ ê¸°ëŠ¥ì„ í•´ê²°í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

## í´ë¼ì´ì–¸íŠ¸ì— íš¡ë‹¨ê´€ì‹¬ì‚¬ëŠ” ë¬´ì—‡ì´ ìˆì„ê¹Œ?

- ì£¼ì†Œ ì •ë³´
- ì „ì—­ ìŠ¤í† ì–´
- ë¡œê¹…

## mixin vs HOC ë¹„êµ

![Untitled](%E1%84%80%E1%85%A9%E1%84%8E%E1%85%A1%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%A9%E1%84%82%E1%85%A5%E1%86%AB%E1%84%90%E1%85%B3%2066ca80b68e9442389164fadafca14fda/Untitled%203.png)

ì™¸ë¶€ë¡œë¶€í„° ë°ì´í„°ë¥¼ êµ¬ë…í•˜ì—¬ ëŒ“ê¸€ ëª©ë¡ì„ ë Œë”ë§í•˜ëŠ” CommentList ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œ

```jsx
class CommentList extends React.Component {
  constructor(props) {
    super(props);
    this.handleChange = this.handleChange.bind(this);
    this.state = {
      // "DataSource" ëŠ” ê¸€ë¡œë²Œ ë°ì´í„° ì†ŒìŠ¤ì…ë‹ˆë‹¤.
      comments: DataSource.getComments()
    };
  }

  componentDidMount() {
    // ë³€í™”ê°ì§€ë¥¼ ìœ„í•´ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
    DataSource.addChangeListener(this.handleChange);
  }

  componentWillUnmount() {
    // ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•©ë‹ˆë‹¤.
    DataSource.removeChangeListener(this.handleChange);
  }

  handleChange() {
    // ë°ì´í„° ì†ŒìŠ¤ê°€ ë³€ê²½ë ë•Œ ë§ˆë‹¤ commentsë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
    this.setState({
      comments: DataSource.getComments()
    });
  }

  render() {
    return (
      <div>
        {this.state.comments.map((comment) => (
          <Comment comment={comment} key={comment.id} />
        ))}
      </div>
    );
  }
}
```

ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ êµ¬ë…

```jsx
class BlogPost extends React.Component {
  constructor(props) {
    super(props);
    this.handleChange = this.handleChange.bind(this);
    this.state = {
      blogPost: DataSource.getBlogPost(props.id)
    };
  }

  componentDidMount() {
    DataSource.addChangeListener(this.handleChange);
  }

  componentWillUnmount() {
    DataSource.removeChangeListener(this.handleChange);
  }

  handleChange() {
    this.setState({
      blogPost: DataSource.getBlogPost(this.props.id)
    });
  }

  render() {
    return <TextBlock text={this.state.blogPost} />;
  }
}
```

ë‘ ì»´í¬ë„ŒíŠ¸ëŠ” ë™ì¼í•˜ì§€ ì•Šë‹¤. ë‘ ì»´í¬ë„ŒíŠ¸ëŠ” Datasourceì—ì„œ ì„œë¡œ ë‹¤ë¥¸ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë‹¤ë¥¸ ë Œë”ë§ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤€ë‹¤. í•˜ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ êµ¬í˜„ì²´ëŠ” ë™ì¼í•˜ë‹¤. 

- ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´ë˜ë©´ change ë¦¬ìŠ¤ë„ˆë¥¼ DataSourceì— ì¶”ê°€í•œë‹¤.
- ë¦¬ìŠ¤ë„ˆ ì•ˆì—ì„œ, ë°ì´í„° ì†ŒìŠ¤ê°€ ë³€ê²½ë˜ë©´ setStateë¥¼ í˜¸ì¶œí•œë‹¤.
- ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë˜ë©´, change ë¦¬ìŠ¤ë„ˆë¥¼ í•´ì œí•œë‹¤.

```jsx
const CommentListWithSubscription = withSubscription(
  CommentList,
  (DataSource) => DataSource.getComments()
);

const BlogPostWithSubscription = withSubscription(
  BlogPost,
  (DataSource, props) => DataSource.getBlogPost(props.id)
);
```

withSubscription êµ¬í˜„ì²´ 

```jsx
// ì´ í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ê³ ..
function withSubscription(WrappedComponent, selectData) {
  // ...ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ”ë°...
  return class extends React.Component {
    constructor(props) {
      super(props);
      this.handleChange = this.handleChange.bind(this);
      this.state = {
        data: selectData(DataSource, props)
      };
    }

    componentDidMount() {
      // ... êµ¬ë…ì„ ë‹´ë‹¹í•˜ê³ ...
      DataSource.addChangeListener(this.handleChange);
    }

    componentWillUnmount() {
      DataSource.removeChangeListener(this.handleChange);
    }

    handleChange() {
      this.setState({
        data: selectData(DataSource, this.props)
      });
    }

    render() {
      // ... ë˜í•‘ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œìš´ ë°ì´í„°ë¡œ ëœë”ë§ í•©ë‹ˆë‹¤!
      // ì»´í¬ë„ŒíŠ¸ì— ì¶”ê°€ë¡œ propsë¥¼ ë‚´ë ¤ì£¼ëŠ” ê²ƒì— ì£¼ëª©í•˜ì„¸ìš”.
      return <WrappedComponent data={this.state.data} {...this.props} />;
    }
  };
}
```

ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì…ë ¥ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šìœ¼ë©° ìƒì†ì„ ì‚¬ìš©í•˜ì—¬ ë™ì‘ì„ ë³µì‚¬í•˜ì§€ë„ ì•ŠëŠ”ë‹¤. ì˜¤íˆë ¤ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì›ë³¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸ë¡œ í¬ì¥í•˜ì—¬ ì¡°í•©í•©ë‹ˆë‹¤. ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì‚¬ì´ë“œ ì´í™íŠ¸ê°€ ì „í˜€ ì—†ëŠ” ìˆœìˆ˜ í•¨ìˆ˜ ì…ë‹ˆë‹¤. 

# ì›ë˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ë³€ê²½í•˜ì§€ ë§ˆì„¸ìš”. ì¡°í•©í•˜ì„¸ìš”.

## ì›ë³¸ ì»´í¬ë„ŒíŠ¸ ë³€ê²½í•˜ëŠ” ê²½ìš°

```jsx
function logProps(InputComponent) {
  InputComponent.prototype.componentDidUpdate = function(prevProps) {
    console.log('Current props: ', this.props);
    console.log('Previous props: ', prevProps);
  };
  // ì›ë³¸ì˜ ì…ë ¥ì„ ë°˜í™˜í•œë‹¤ëŠ” ê²ƒì€ ì´ë¯¸ ë³€í˜•ë˜ì—ˆë‹¤ëŠ” ì ì„ ì‹œì‚¬í•©ë‹ˆë‹¤.
  return InputComponent;
}

// EnhancedComponent ëŠ” propsë¥¼ ë°›ì„ ë•Œ ë§ˆë‹¤ logë¥¼ ë‚¨ê¹ë‹ˆë‹¤.
const EnhancedComponent = logProps(InputComponent);
```

### ë¬¸ì œì 

- ì…ë ¥ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ í™•ì¥ëœ ì»´í¬ë„ŒíŠ¸ì™€ ë³„ë„ë¡œ ì¬ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤
- componentDidUpdateë¥¼ ë³€í˜•í•˜ëŠ” EnhancedComponentì— ë˜ ë‹¤ë¥¸ HOCë¥¼ ì ìš©í•˜ë©´ ì²« ë²ˆì§¸ HOCì˜ ê¸°ëŠ¥ì€ ë¬´ì‹œëœë‹¤. ì´ HOCëŠ” ìƒëª…ì£¼ê¸° ë©”ì„œë“œê°€ ì—†ëŠ” í•¨ìˆ˜ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤.

## HOCë¥¼ ì´ìš©í•´ì„œ ì»´í¬ë„ŒíŠ¸ ì¡°í•©í•˜ëŠ” ê²½ìš°

```jsx
function logProps(WrappedComponent) {
  return class extends React.Component {
    componentDidUpdate(prevProps) {
      console.log('Current props: ', this.props);
      console.log('Previous props: ', prevProps);
    }
    render() {
      // ë“¤ì–´ì˜¨ componentë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ” containerì…ë‹ˆë‹¤. ì¢‹ì•„ìš”!
      return <WrappedComponent {...this.props} />;
    }
  }
}
```

# ì»¨ë²¤ì…˜: ë˜í•‘ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ ê´€ë ¨ì—†ëŠ” Props ì „ë‹¬í•˜ê¸°

ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ì— ê¸°ëŠ¥ì„ ì¶”ê°€í•©ë‹ˆë‹¤. ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì •ì˜(contract)ë¥¼ ê³¼ê°í•˜ê²Œ ë³€ê²½í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤. ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°˜í™˜ëœ ì»´í¬ë„ŒíŠ¸ëŠ” ë˜í•‘ëœ ì»´í¬ë„ŒíŠ¸ì™€ ë¹„ìŠ·í•œ ì¸í„°í˜ì´ìŠ¤ê°€ ìˆì–´ì•¼í•©ë‹ˆë‹¤.

```jsx
render() {
  // ì´ HOCì—ë§Œ í•´ë‹¹ë˜ë¯€ë¡œ ì¶”ê°€ëœ propsëŠ” ê±¸ëŸ¬ë‚´ì–´ ì´ HOCì— ì „ë‹¬ë˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.
  const { extraProp, ...passThroughProps } = this.props;

  // ì´ PropsëŠ” ì¼ë°˜ì ìœ¼ë¡œ Statusê°’ ë˜ëŠ” Instance method ì…ë‹ˆë‹¤.
  const injectedProp = someStateOrInstanceMethod;

  // wrapped componentì— propsë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.
  return (
    <WrappedComponent
      injectedProp={injectedProp}
      {...passThroughProps}
    />
  );
}
```

# ì»¨ë²¤ì…˜: ì¡°í•© ê°€ëŠ¥ì„± ëŒì–´ì˜¬ë¦¬ê¸°

ë‹¨ì¼ ì¸ìˆ˜ë¡œ ë˜í•‘ëœ ì»´í¬ë„ŒíŠ¸

```jsx
const NavbarWithRouter = withRouter(Navbar);
```

ì¶”ê°€ ì¸ìˆ˜ í—ˆìš©

```jsx
const CommentWithRelay = Relay.createContainer(Comment, config);
```

ì¼ë°˜ì ì¸ ì‚¬ìš©ì˜ˆ

```jsx
// React Reduxì˜ `connect`
const ConnectedComment = connect(commentSelector, commentActions)(CommentList);
```

ìœ„ ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ë©´?

```jsx
// connectëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤.
const enhance = connect(commentListSelector, commentListActions);
// ë°˜í™˜ëœ í•¨ìˆ˜ëŠ” Redux storeì— ì—°ê²°ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ”
// ê³ ì°¨ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ ì…ë‹ˆë‹¤.
const ConnectedComment = enhance(CommentList);
```

ë‹¤ì‹œ ë§í•´ connectëŠ” ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” ê³ ì°¨ í•¨ìˆ˜ ì…ë‹ˆë‹¤. 

ë‹¨ì¼ ì¸ìˆ˜ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” Component â‡’ Component íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ì¶œë ¥ íƒ€ì…ì´ ì…ë ¥íƒ€ì…ê³¼ ë™ì¼í•œ í•¨ìˆ˜ëŠ” ì •ë§ ì‰½ê²Œ ì¡°í•© í•  ìˆ˜ ìˆë‹¤. 

```jsx
// ì´ë ‡ê²Œ í•˜ëŠ” ëŒ€ì‹ ì—...
const EnhancedComponent = withRouter(connect(commentSelector)(WrappedComponent))

// ... í•¨ìˆ˜ êµ¬ì„± ìœ í‹¸ë¦¬í‹°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
// compose(f, g, h)ëŠ” (...args) => f(g(h(...args)))ì™€ ê°™ìŠµë‹ˆë‹¤.
const enhance = compose(
  // ë‘˜ ë‹¤ ë‹¨ì¼ ë§¤ê°œë³€ìˆ˜ì˜ HOCì…ë‹ˆë‹¤.
  withRouter,
  connect(commentSelector)
)
const EnhancedComponent = enhance(WrappedComponent)
```

compose ìœ í‹¸ë¦¬í‹° ê¸°ëŠ¥(íš¨ìš© í•¨ìˆ˜)ëŠ” lodash, Redux, And Ramda ë¥¼ í¬í•¨í•œ ë§ì€ ì„œë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ê³  ìˆë‹¤. 

# ì»¨ë²¤ì…˜: ê°„ë‹¨í•œ ë””ë²„ê¹…ì„ ìœ„í•œ ë””ìŠ¤í”Œë ˆì´ ë„¤ì„ ì‘ì„±ë°©ë²•

ë‹¤ë¥¸ êµ¬ì„± ìš”ì†Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ HOCë¡œ ë§Œë“  ì»¨í…Œì´ë„ˆ êµ¬ì„± ìš”ì†Œë„Â [React Developer Tools](https://github.com/facebook/react/tree/main/packages/react-devtools)
ì— í‘œì‹œë©ë‹ˆë‹¤. ë””ë²„ê¹…ì„ ì‰½ê²Œ í•˜ë ¤ë©´ HOCì˜ ê²°ê³¼ì„ì„ ì•Œë¦¬ëŠ” ë””ìŠ¤í”Œë ˆì´ ë„¤ì„ì„ ì‘ì„±í•©ë‹ˆë‹¤.

```jsx
function withSubscription(WrappedComponent) {
  class WithSubscription extends React.Component {/* ... */}
  WithSubscription.displayName = `WithSubscription(${getDisplayName(WrappedComponent)})`;
  return WithSubscription;
}

function getDisplayName(WrappedComponent) {
  return WrappedComponent.displayName || WrappedComponent.name || 'Component';
}
```

ë¦¬ì•¡íŠ¸ ê°œë°œì ë„êµ¬

```jsx
<App>
  <WithLogging>
    <Header>
  <WithLoggin>
    <Button>
```

```jsx
WithLogging.displayName = `WithLogging(${getComponentName(WrappedComponent)})`
```

```jsx
<App>
  <Header> WithLogging
    <Header>
  <Button> WithLogging
    <Button>
```

# ì£¼ì˜ì‚¬í•­

- í•­ìƒ í•¨ìˆ˜ë¡œ ê°ì‹¸ì¤˜ì•¼ í•œë‹¤.
- render ë©”ì†Œë“œ ì•ˆì—ì„œ HOCë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.
- ì •ì  ë©”ì†Œë“œëŠ” ë”°ë¡œ ë³µì‚¬í•´ì•¼ í•œë‹¤.
- refëŠ” ì „ë‹¬ë˜ì§€ ì•ŠëŠ”ë‹¤.

## render ë©”ì„œë“œ ì•ˆì—ì„œ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.

ì—¬ê¸°ì„œ ì„±ëŠ¥ìƒì˜ ë¬¸ì œë¿ë§Œ ì•„ë‹ˆë¼ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë§ˆìš´íŠ¸ ë˜ë©´ì„œ ì»´í¬ë„ŒíŠ¸ì˜ stateì™€ ì»´í¬ë„ŒíŠ¸ì˜ í•˜ìœ„ í•­ëª©ë“¤ì´ ì†ì‹¤ë©ë‹ˆë‹¤.

```jsx
render() {
  // renderê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ë²„ì „ì˜ EnhancedComponentê°€ ìƒì„±ë©ë‹ˆë‹¤.
  // EnhancedComponent1 !== EnhancedComponent2
  const EnhancedComponent = enhance(MyComponent);
  // ë•Œë¬¸ì— ë§¤ë²ˆ ì „ì²´ ì„œë¸ŒíŠ¸ë¦¬ê°€ ë§ˆìš´íŠ¸ í•´ì œ í›„ ë‹¤ì‹œ ë§ˆìš´íŠ¸ ë©ë‹ˆë‹¤!
  return <EnhancedComponent />;
}
```

## ì •ì  ë©”ì„œë“œëŠ” ë°˜ë“œì‹œ ë”°ë¡œ ë³µì‚¬í•˜ì„¸ìš”. 3ê°€ì§€ ë°©ë²•

ë¬¸ì œ

```jsx
// ì •ì  í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤
WrappedComponent.staticMethod = function() {/*...*/}
// HOCë¥¼ ì ìš©í•©ë‹ˆë‹¤
const EnhancedComponent = enhance(WrappedComponent);

// í–¥ìƒëœ ì»´í¬ë„ŒíŠ¸ì—ëŠ” ì •ì  ë©”ì„œë“œê°€ ì—†ìŠµë‹ˆë‹¤.
typeof EnhancedComponent.staticMethod === 'undefined' // true
```

1ì°¨ í•´ê²°ì‹œë„

```jsx
function enhance(WrappedComponent) {
  class Enhance extends React.Component {/*...*/}
  // ë³µì‚¬ í•  ë©”ì„œë“œë¥¼ ì •í™•íˆ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.
  Enhance.staticMethod = WrappedComponent.staticMethod;
  return Enhance;
}
```

2ì°¨ í•´ê²°ì‹œë„

ê·¸ëŸ¬ë‚˜ ë³µì‚¬í•´ì•¼ í•  ë©”ì„œë“œë¥¼ ì •í™•íˆ ì•Œì•„ì•¼ í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.Â [hoist-non-react-statics](https://github.com/mridgway/hoist-non-react-statics)
ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  non-React ì •ì  ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ ë³µì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
import hoistNonReactStatic from 'hoist-non-react-statics';
function enhance(WrappedComponent) {
  class Enhance extends React.Component {/*...*/}
  hoistNonReactStatic(Enhance, WrappedComponent);
  return Enhance;
}
```

3ì°¨ í•´ê²°ì‹œë„

```jsx
// ëŒ€ì‹ ì—...
MyComponent.someFunction = someFunction;
export default MyComponent;

// ...ë©”ì„œë“œë¥¼ ê°ê° ë‚´ë³´ë‚´ê³ ...
export { someFunction };

// ...ë¶ˆëŸ¬ì˜¤ëŠ” ëª¨ë“ˆì—ì„œ ë‘ê°œë¥¼ ë‹¤ ì„í¬íŠ¸í•©ë‹ˆë‹¤.
import MyComponent, { someFunction } from './MyComponent.js';
```

## refëŠ” ì „ë‹¬ë˜ì§€ ì•ŠëŠ”ë‹¤.

ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ëª¨ë“  propsë¥¼ ë˜í•‘ëœ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì›ì¹™ì´ì§€ë§Œ, refsì—ì„œëŠ” ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŠ” Reactì—ì„œÂ `ref`ê°€ ì‹¤ì œ propì´ ì•„ë‹ŒÂ `key`ì²˜ëŸ¼ íŠ¹ë³„í•˜ê²Œ ì·¨ê¸‰ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì´ ë¬¸ì œì˜ í•´ê²° ë°©ë²•ì€Â `React.forwardRef`APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. (React 16.3ì— ë„ì…ë¨)Â [ìì„¸í•œ ë‚´ìš©ì€ Forwarding Refs ì„¹ì…˜ì„ ì°¸ì¡°](https://ko.reactjs.org/docs/forwarding-refs.html)

# ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ì˜ ë‹¨ì 

1. ì‚¬ìš©ìê°€ ì§ì ‘ ë„˜ê¸´ propsì™¸ì—ë„ ì•”ë¬µì ìœ¼ë¡œ ë„˜ì–´ì˜¤ëŠ” ì†ì„± ê°’ì´ ì¡´ì¬í•œë‹¤.
2. ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ ê°„ì— ê°™ì€ ì´ë¦„ì˜ ì†ì„± ê°’ì„ ì‚¬ìš©í•˜ë©´ ì¶©ëŒì´ ë°œìƒí•œë‹¤. 
3. ì˜ë¡€ì ì¸ ì ˆì°¨ê°€ ë§ì´ í•„ìš”í•˜ë‹¤.
4. ì‚¬ì‹¤ ë„ˆë¬´ ì˜ê°œ ìª¼ê°œì§„ ê³ ì°¨ì»´í¬ë„ŒíŠ¸ëŠ” ì˜¤íˆë ¤ ë Œë”ë§ ì„±ëŠ¥ì— ì¢‹ì§€ ì•Šë‹¤.

# ì°¸ê³ ì‚¬ì´íŠ¸

[https://velog.io/@1998yuki0331/ê³ ì°¨-ì»´í¬ë„ŒíŠ¸-Higher-Order-Components](https://velog.io/@1998yuki0331/%EA%B3%A0%EC%B0%A8-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-Higher-Order-Components)

[https://jeonghwan-kim.github.io/2022/05/28/react-high-order-component](https://jeonghwan-kim.github.io/2022/05/28/react-high-order-component)